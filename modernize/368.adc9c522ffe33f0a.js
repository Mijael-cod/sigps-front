"use strict";(self.webpackChunktestApp=self.webpackChunktestApp||[]).push([[368],{9461:(P,F,d)=>{d.d(F,{I:()=>u});var h=d(1084),e=d(4438);let u=(()=>{class p{static#e=this.\u0275fac=function(b){return new(b||p)};static#o=this.\u0275mod=e.$C({type:p});static#n=this.\u0275inj=e.G2t({imports:[h.c9,h.h_,h.IQ]})}return p})()},368:(P,F,d)=>{d.r(F),d.d(F,{PlanTrabajoModule:()=>ve});var h=d(177),e=d(4438),u=d(1084),p=d(5596),l=d(9417),j=d(1885),b=d(4013);const T=(r,c)=>c.key;function I(r,c){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td")(30,"div",29)(31,"button",30),e.nrm(32,"i",31),e.k0s(),e.j41(33,"button",32),e.nrm(34,"i",33),e.k0s()()()()),2&r){const o=c.$implicit;e.R7$(2),e.JRh(o.key),e.R7$(2),e.JRh(o.facultad),e.R7$(2),e.JRh(o.universidad),e.R7$(2),e.JRh(o.unidad_organica),e.R7$(2),e.JRh(o.fecha_inicio),e.R7$(2),e.JRh(o.fecha_fin),e.R7$(2),e.JRh(o.compromiso),e.R7$(2),e.JRh(o.detalle),e.R7$(2),e.JRh(o.duration),e.R7$(2),e.JRh(o.sede),e.R7$(2),e.JRh(o.beneficiados),e.R7$(2),e.JRh(o.valorizacion),e.R7$(2),e.JRh(o.responsable),e.R7$(2),e.JRh(o.estado)}}const M=[{key:1,facultad:"Facultad de Ingenier\xeda",universidad:"Universidad Nacional de Trujillo",unidad_organica:"Facultad de Ingenier\xeda",fecha_inicio:"11/07/2024",fecha_fin:"11/07/2024",compromiso:"Compromiso 1",detalle:"Detalle 1",duration:"1 a\xf1o",sede:"Sede 1",beneficiados:"Beneficiados 1",valorizacion:"Valorizaci\xf3n 1",responsable:"Universidad 1",estado:"Activo"},{key:2,facultad:"Facultad de Ingenier\xeda",universidad:"Universidad Nacional de Trujillo",unidad_organica:"Facultad de Ingenier\xeda",fecha_inicio:"11/07/2024",fecha_fin:"11/07/2024",compromiso:"Compromiso 1",detalle:"Detalle 1",duration:"1 a\xf1o",sede:"Sede 1",beneficiados:"Beneficiados 1",valorizacion:"Valorizaci\xf3n 1",responsable:"EsSalud",estado:"Activo"}];let y=(()=>{class r{constructor(o,t){this.modalService=t,this.page=1,this.pageSize=4,this.collectionSize=M.length,o.backdrop="static",o.keyboard=!1,this.refreshCountries()}ngOnInit(){}refreshCountries(){this.convenios=M.map((o,t)=>({id:t+1,...o})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}open(o){this.modalService.open(o)}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(u.LY),e.rXU(u.Bq))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-convenio-universidad"]],decls:95,vars:21,consts:[["iconName","bell-ringing",3,"cardTitle","cardSubtitle"],[1,"cardWithShadow"],[1,"row"],[1,"col-md-4"],["name","","id","tipo_document",1,"form-control"],["value",""],[1,"col-md-3"],[3,"showFirstButton","showSecondButton","iconName","buttonTitle","title","buttonText"],[1,"col-md-12"],["for","facultad",1,"form-label","fw-bold"],["type","text","name","facultad","id","facultad","placeholder","Escribir facultad",1,"form-control"],[1,"col-md-2"],[1,"col-md-6"],["for","universidad",1,"form-label","fw-bold"],["type","text","name","universidad","id","universidad","placeholder","Escribir universidad",1,"form-control"],[1,"row","mt-2"],["for","unidad_organica",1,"form-label","fw-bold"],["type","text","name","unidad_organica","id","unidad_organica","placeholder","Escribir unidad organica",1,"form-control"],["for","fecha_inicio",1,"form-label","fw-bold"],["type","date","name","fecha_inicio","id","fecha_inicio",1,"form-control"],["for","fecha_fin",1,"form-label","fw-bold"],["type","date","name","fecha_fin","id","fecha_fin",1,"form-control"],[2,"overflow-x","auto"],[1,"table","table-striped"],[1,"fw-bold"],[1,"d-flex","justify-content-between","p-2"],[3,"pageChange","collectionSize","page","pageSize"],[1,"form-select",2,"width","auto",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"d-flex"],[1,"btn","btn-sm","btn-outline-primary","me-1"],[1,"fa-regular","fa-eye"],[1,"btn","btn-sm","btn-outline-danger"],[1,"fa-solid","fa-trash"]],template:function(t,n){1&t&&(e.nrm(0,"app-reusable-card",0),e.j41(1,"mat-card",1)(2,"mat-card-content")(3,"div",2)(4,"div",3)(5,"select",4)(6,"option",5),e.EFF(7,"Filtrar por Universidad"),e.k0s(),e.j41(8,"option",5),e.EFF(9,"UPeU"),e.k0s(),e.j41(10,"option",5),e.EFF(11,"UMSM"),e.k0s(),e.j41(12,"option",5),e.EFF(13,"UVR"),e.k0s()()(),e.nrm(14,"div",6),e.j41(15,"div",6)(16,"app-reusable-modal",7)(17,"div",2)(18,"div",8)(19,"label",9),e.EFF(20,"Compromiso"),e.k0s(),e.nrm(21,"input",10),e.k0s()()()(),e.j41(22,"div",11)(23,"app-reusable-modal",7)(24,"div",2)(25,"div",12)(26,"label",9),e.EFF(27,"Facultad"),e.k0s(),e.nrm(28,"input",10),e.k0s(),e.j41(29,"div",12)(30,"label",13),e.EFF(31,"Universidad"),e.k0s(),e.nrm(32,"input",14),e.k0s()(),e.j41(33,"div",15)(34,"div",8)(35,"label",16),e.EFF(36,"Unidad Organica"),e.k0s(),e.nrm(37,"input",17),e.k0s()(),e.j41(38,"div",15)(39,"div",12)(40,"label",18),e.EFF(41,"Fecha Inicio"),e.k0s(),e.nrm(42,"input",19),e.k0s(),e.j41(43,"div",12)(44,"label",20),e.EFF(45,"Fecha Fin"),e.k0s(),e.nrm(46,"input",21),e.k0s()()()()(),e.nrm(47,"br")(48,"br"),e.j41(49,"div",22)(50,"table",23)(51,"thead")(52,"tr")(53,"th",24),e.EFF(54,"N\xb0"),e.k0s(),e.j41(55,"th",24),e.EFF(56,"Facultad"),e.k0s(),e.j41(57,"th",24),e.EFF(58,"Universidad"),e.k0s(),e.j41(59,"th",24),e.EFF(60,"Unidad Organica"),e.k0s(),e.j41(61,"th",24),e.EFF(62,"Fecha Inicio"),e.k0s(),e.j41(63,"th",24),e.EFF(64,"Fecha Fin"),e.k0s(),e.j41(65,"th",24),e.EFF(66,"Compromiso"),e.k0s(),e.j41(67,"th",24),e.EFF(68,"Detalle"),e.k0s(),e.j41(69,"th",24),e.EFF(70,"Duraci\xf3n"),e.k0s(),e.j41(71,"th",24),e.EFF(72,"Sede"),e.k0s(),e.j41(73,"th",24),e.EFF(74,"Beneficiados"),e.k0s(),e.j41(75,"th",24),e.EFF(76,"Valorizaci\xf3n"),e.k0s(),e.j41(77,"th",24),e.EFF(78,"Responsable"),e.k0s(),e.j41(79,"th",24),e.EFF(80,"Estado"),e.k0s(),e.j41(81,"th",24),e.EFF(82,"OPC"),e.k0s()()(),e.j41(83,"tbody"),e.Z7z(84,I,35,14,"tr",null,T),e.k0s()()(),e.j41(86,"div",25)(87,"ngb-pagination",26),e.mxI("pageChange",function(a){return e.DH7(n.page,a)||(n.page=a),a}),e.bIt("pageChange",function(){return n.refreshCountries()}),e.k0s(),e.j41(88,"select",27),e.mxI("ngModelChange",function(a){return e.DH7(n.pageSize,a)||(n.pageSize=a),a}),e.bIt("ngModelChange",function(){return n.refreshCountries()}),e.j41(89,"option",28),e.EFF(90,"2 items per page"),e.k0s(),e.j41(91,"option",28),e.EFF(92,"4 items per page"),e.k0s(),e.j41(93,"option",28),e.EFF(94,"6 items per page"),e.k0s()()()()()),2&t&&(e.Y8G("cardTitle","Plan de Trabajo")("cardSubtitle","Convenios especificos de EsSalud - Universidades "),e.R7$(16),e.Y8G("showFirstButton",!1)("showSecondButton",!0)("iconName","circle-plus")("buttonTitle","Agregar Compromiso")("title","Plan de Trabajo")("buttonText","Guardar"),e.R7$(7),e.Y8G("showFirstButton",!1)("showSecondButton",!0)("iconName","circle-plus")("buttonTitle","Agregar")("title","Plan de Trabajo")("buttonText","Guardar"),e.R7$(61),e.Dyx(n.convenios),e.R7$(3),e.Y8G("collectionSize",n.collectionSize),e.R50("page",n.page),e.Y8G("pageSize",n.pageSize),e.R7$(),e.R50("ngModel",n.pageSize),e.R7$(),e.Y8G("ngValue",2),e.R7$(2),e.Y8G("ngValue",4),e.R7$(2),e.Y8G("ngValue",6))},dependencies:[p.RN,p.m2,l.xH,l.y7,l.wz,l.BC,l.vS,u.s5,j.v,b.w]})}return r})();var C=d(1185),A=d(5112),w=d(9107);d(4941);let z=(()=>{class r{constructor(){}exportPlanTrabajoPDF(o){const t=new w.default({orientation:"landscape"}),i=o.map((a,s)=>({numero:s+1,nombre:a.nombre||"",fecha_inicio:a.fecha_inicio||"",fecha_fin:a.fecha_fin||"",universidad:a.universidadDetalle?.nombre||"",acuerdos:a.acuerdo?.length||0,estado:a.estado?"Activo":"Inactivo"}));t.autoTable({head:[[{header:"N\xb0",dataKey:"numero"},{header:"Nombre",dataKey:"nombre"},{header:"Fecha Inicio",dataKey:"fecha_inicio"},{header:"Fecha Fin",dataKey:"fecha_fin"},{header:"Universidad",dataKey:"universidad"},{header:"N\xb0 de Acuerdos",dataKey:"acuerdos"},{header:"Estado",dataKey:"estado"}].map(a=>a.header)],body:i.map(a=>Object.values(a)),theme:"striped",styles:{fontSize:8,cellPadding:1},margin:{top:20}}),t.save("plan_trabajo_postgrado.pdf")}static#e=this.\u0275fac=function(t){return new(t||r)};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var m=d(2288);let D=(()=>{class r{constructor(){}exportarConveniosExcel(o){const t=o.map((a,s)=>({"N\xb0":s+1,Nombre:a.nombre||"","Fecha Inicio":a.fecha_inicio||"","Fecha Fin":a.fecha_fin||"",Universidad:a.universidadDetalle?.nombre||"",Acuerdos:a.acuerdo?.length||0,Estado:a.estado?"Activo":"Inactivo"})),n=m.Wp.json_to_sheet(t),i=m.Wp.book_new();m.Wp.book_append_sheet(i,n,"Convenios Pregrado"),m._h(i,"Convenios_Postgrado.xlsx")}static#e=this.\u0275fac=function(t){return new(t||r)};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var g=d(8498);const x=(r,c)=>({"text-success":r,"text-danger":c}),N=r=>["/plan-trabajo/detalle",r];function V(r,c){if(1&r&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&r){const o=c.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.siglas,"")}}function O(r,c){if(1&r&&(e.j41(0,"tr")(1,"th",34),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td",35),e.EFF(12),e.k0s(),e.j41(13,"td",35)(14,"span",36),e.nrm(15,"i",36),e.k0s()(),e.j41(16,"td",37)(17,"div",38)(18,"button",39),e.nrm(19,"i",40),e.EFF(20,"Ver Detalle "),e.k0s()()()()),2&r){const o=c.$implicit,t=c.index;e.R7$(2),e.JRh(t+1),e.R7$(2),e.JRh(o.nombre),e.R7$(2),e.JRh(o.fecha_inicio),e.R7$(2),e.JRh(o.fecha_fin),e.R7$(2),e.JRh(null==o.universidadDetalle?null:o.universidadDetalle.nombre),e.R7$(2),e.JRh(o.acuerdo.length),e.R7$(2),e.Y8G("ngClass",e.l_i(9,x,o.estado,!o.estado)),e.R7$(),e.Y8G("ngClass",o.estado?"fa-solid fa-circle text-success":"fa-solid fa-circle text-danger"),e.R7$(3),e.Y8G("routerLink",e.eq3(12,N,o.id))}}let B=(()=>{class r{constructor(o,t,n,i,a,s){this.modalService=t,this.planTrabajoService=n,this.universidadesService=i,this.exportPdfService=a,this.exportExcelService=s,this.page=1,this.pageSize=4,this.CONVENIOS=[],this.convenios=[],this.collection=0,this.listuniversidades=[],this.searchTerm="",this.newConvenio={nombre:"",is_postgrado:!0,fecha_inicio:"",fecha_fin:"",estado:!0,universidad:"",acuerdo:[]},o.backdrop="static",o.keyboard=!1,this.refreshPlanTrabajo()}ngOnInit(){this.getPlanTrabajo(),this.getUniversidades()}refreshPlanTrabajo(){let o=this.CONVENIOS;this.searchTerm&&(o=o.filter(t=>{const n=t.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()),i=t.universidadDetalle?.nombre.toLowerCase().includes(this.searchTerm.toLowerCase());return n||i})),this.collection=o.length,this.convenios=o.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),0===this.convenios.length&&this.page>1&&(this.page--,this.refreshPlanTrabajo())}onSearchTermChange(){this.refreshPlanTrabajo()}open(o){this.modalService.open(o)}getUniversidades(){this.universidadesService.getUniversidades().subscribe(o=>{console.log(o),this.listuniversidades=o},o=>{console.error(o)})}getPlanTrabajo(){this.planTrabajoService.getPlanTrabajo().subscribe({next:o=>{const t=o.filter(n=>!0===n.is_postgrado);this.CONVENIOS=t,this.collection=t.length,this.refreshPlanTrabajo(),this.universidadesService.getUniversidades().subscribe({next:n=>{t.forEach(i=>{if(i.universidad){const a=n.find(s=>s.id===i.universidad);a&&(i.universidadDetalle=a)}})},error:n=>{console.error("Error fetching universidades:",n)}})},error:o=>{console.error("Error fetching plan de trabajo:",o)}})}createPlanTrabajo(){this.planTrabajoService.createPlanTrabajo(this.newConvenio).subscribe(o=>{console.log(o),console.log("Datos enviados:",this.newConvenio),this.getPlanTrabajo()},o=>{console.error(o)})}exportarPDF(){this.exportPdfService.exportPlanTrabajoPDF(this.convenios)}exportarExcel(){this.exportExcelService.exportarConveniosExcel(this.convenios)}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(u.LY),e.rXU(u.Bq),e.rXU(C.a),e.rXU(A.k),e.rXU(z),e.rXU(D))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-postgrado"]],features:[e.Jv_([u.LY,u.Bq])],decls:71,vars:22,consts:[["iconName","bell-ringing",3,"cardTitle","cardSubtitle"],[1,"cardWithShadow"],[1,"row"],[1,"col-md-6"],[1,"example-input","position-relative"],["type","text","placeholder","Buscar por nombre de plan o universidad",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"btn","btn-primary",2,"position","absolute","right","0","top","0"],[1,"fas","fa-search"],[2,"text-align","right"],[3,"buttonClick","showFirstButton","showSecondButton","iconName","buttonTitle","title","buttonText"],["for","nombre",1,"form-label","fw-bold"],["type","text","name","nombre","id","nombre","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],["for","universidad",1,"form-label","fw-bold"],["name","universidad","id","universidad",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-3"],["for","fecha_inicio",1,"form-label","fw-bold"],["type","date","id","fecha_inicio","name","fecha_inicio",1,"form-control",3,"ngModelChange","ngModel"],["for","fecha_fin",1,"form-label","fw-bold"],["type","date","id","fecha_fin","name","fecha_fin",1,"form-control",3,"ngModelChange","ngModel"],["nz-button","","nzType","link",1,"fw-bold",2,"margin-left","15px","text-decoration","none",3,"click"],[1,"fa-solid","fa-file-pdf","me-2"],["nz-button","","nzType","link",1,"text-success","fw-bold",2,"margin-left","15px","text-decoration","none",3,"click"],[1,"fa-solid","fa-file-excel","me-2"],[2,"overflow-x","auto"],[1,"table","table-striped"],[1,"fw-bold"],[1,"fw-bold","text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"pageChange","collectionSize","page","pageSize"],[1,"form-select",2,"width","auto",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value"],["scope","row"],[1,"text-center"],[3,"ngClass"],[1,"justify-content-center","d-flex"],[1,"d-flex"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"routerLink"],[1,""]],template:function(t,n){1&t&&(e.nrm(0,"app-reusable-card",0),e.j41(1,"mat-card",1)(2,"mat-card-content")(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.bIt("input",function(){return n.onSearchTermChange()}),e.k0s(),e.j41(7,"button",6),e.nrm(8,"i",7),e.k0s()()(),e.j41(9,"div",3)(10,"div",8)(11,"app-reusable-modal",9),e.bIt("buttonClick",function(){return n.createPlanTrabajo()}),e.j41(12,"div",2)(13,"div",3)(14,"label",10),e.EFF(15,"Nombre"),e.k0s(),e.j41(16,"input",11),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.nombre,a)||(n.newConvenio.nombre=a),a}),e.k0s()(),e.j41(17,"div",3)(18,"label",12),e.EFF(19,"Universidad"),e.k0s(),e.j41(20,"select",13),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.universidad,a)||(n.newConvenio.universidad=a),a}),e.j41(21,"option"),e.EFF(22,"Selecione la Universidad"),e.k0s(),e.DNE(23,V,2,2,"option",14),e.k0s()()(),e.j41(24,"div",15)(25,"div",3)(26,"label",16),e.EFF(27,"Fecha Inicio"),e.k0s(),e.j41(28,"input",17),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.fecha_inicio,a)||(n.newConvenio.fecha_inicio=a),a}),e.k0s()(),e.j41(29,"div",3)(30,"label",18),e.EFF(31,"Fecha Inicio"),e.k0s(),e.j41(32,"input",19),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.fecha_fin,a)||(n.newConvenio.fecha_fin=a),a}),e.k0s()()()(),e.j41(33,"a",20),e.bIt("click",function(){return n.exportarPDF()}),e.nrm(34,"i",21),e.EFF(35," Exportar PDF "),e.k0s(),e.j41(36,"a",22),e.bIt("click",function(){return n.exportarExcel()}),e.nrm(37,"i",23),e.EFF(38," Exportar Excel "),e.k0s()()()(),e.nrm(39,"br"),e.j41(40,"div",24)(41,"table",25)(42,"thead")(43,"tr")(44,"th",26),e.EFF(45,"N\xb0"),e.k0s(),e.j41(46,"th",26),e.EFF(47,"Nombre"),e.k0s(),e.j41(48,"th",26),e.EFF(49,"Fec. Inicio"),e.k0s(),e.j41(50,"th",26),e.EFF(51,"Fec. Fin"),e.k0s(),e.j41(52,"th",26),e.EFF(53,"Universidad"),e.k0s(),e.j41(54,"th",27),e.EFF(55,"Acuerdos"),e.k0s(),e.j41(56,"th",27),e.EFF(57,"Estado"),e.k0s(),e.j41(58,"th",27),e.EFF(59,"Detalle"),e.k0s()()(),e.j41(60,"tbody"),e.DNE(61,O,21,14,"tr",28),e.k0s()()(),e.j41(62,"div",29)(63,"ngb-pagination",30),e.mxI("pageChange",function(a){return e.DH7(n.page,a)||(n.page=a),a}),e.bIt("pageChange",function(){return n.refreshPlanTrabajo()}),e.k0s(),e.j41(64,"select",31),e.mxI("ngModelChange",function(a){return e.DH7(n.pageSize,a)||(n.pageSize=a),a}),e.bIt("ngModelChange",function(){return n.refreshPlanTrabajo()}),e.j41(65,"option",32),e.EFF(66,"2 items per page"),e.k0s(),e.j41(67,"option",32),e.EFF(68,"4 items per page"),e.k0s(),e.j41(69,"option",32),e.EFF(70,"6 items per page"),e.k0s()()()()()),2&t&&(e.Y8G("cardTitle","Plan de Trabajo Postgrado")("cardSubtitle","Convenios especificos de EsSalud - Universidades"),e.R7$(6),e.R50("ngModel",n.searchTerm),e.R7$(5),e.Y8G("showFirstButton",!0)("showSecondButton",!1)("iconName","circle-plus")("buttonTitle","Agregar")("title","Agregar un Plan de Trabajo")("buttonText","Guardar"),e.R7$(5),e.R50("ngModel",n.newConvenio.nombre),e.R7$(4),e.R50("ngModel",n.newConvenio.universidad),e.R7$(3),e.Y8G("ngForOf",n.listuniversidades),e.R7$(5),e.R50("ngModel",n.newConvenio.fecha_inicio),e.R7$(4),e.R50("ngModel",n.newConvenio.fecha_fin),e.R7$(29),e.Y8G("ngForOf",n.convenios),e.R7$(2),e.Y8G("collectionSize",n.collection),e.R50("page",n.page),e.Y8G("pageSize",n.pageSize),e.R7$(),e.R50("ngModel",n.pageSize),e.R7$(),e.Y8G("ngValue",2),e.R7$(2),e.Y8G("ngValue",4),e.R7$(2),e.Y8G("ngValue",6))},dependencies:[h.YU,h.Sq,g.Wk,p.RN,p.m2,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,u.s5,j.v,b.w],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px}.filter-title[_ngcontent-%COMP%]{font-size:13px;color:#8f9bb3;margin-bottom:5px}.input-rounded[_ngcontent-%COMP%]{border-radius:50px;padding:0 15px}.icon-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border:none;background:transparent;cursor:pointer;color:#276ca1}.icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#276ca1}.btn-blue[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none}.btn-blue[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.ayuda-btn[_ngcontent-%COMP%]{background-color:#007bff!important;border-color:#007bff!important;color:#fff}"]})}return r})(),U=(()=>{class r{constructor(){}exportPlanTrabajoPDF(o){const t=new w.default({orientation:"landscape"}),i=o.map((a,s)=>({numero:s+1,nombre:a.nombre||"",fecha_inicio:a.fecha_inicio||"",fecha_fin:a.fecha_fin||"",universidad:a.universidadDetalle?.nombre||"",acuerdos:a.acuerdo?.length||0,estado:a.estado?"Activo":"Inactivo"}));t.autoTable({head:[[{header:"N\xb0",dataKey:"numero"},{header:"Nombre",dataKey:"nombre"},{header:"Fecha Inicio",dataKey:"fecha_inicio"},{header:"Fecha Fin",dataKey:"fecha_fin"},{header:"Universidad",dataKey:"universidad"},{header:"N\xb0 de Acuerdos",dataKey:"acuerdos"},{header:"Estado",dataKey:"estado"}].map(a=>a.header)],body:i.map(a=>Object.values(a)),theme:"striped",styles:{fontSize:8,cellPadding:1},margin:{top:20}}),t.save("plan_trabajo_pregrado.pdf")}static#e=this.\u0275fac=function(t){return new(t||r)};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),G=(()=>{class r{constructor(){}exportarConveniosExcel(o){const t=o.map((a,s)=>({"N\xb0":s+1,Nombre:a.nombre||"","Fecha Inicio":a.fecha_inicio||"","Fecha Fin":a.fecha_fin||"",Universidad:a.universidadDetalle?.nombre||"",Acuerdos:a.acuerdo?.length||0,Estado:a.estado?"Activo":"Inactivo"})),n=m.Wp.json_to_sheet(t),i=m.Wp.book_new();m.Wp.book_append_sheet(i,n,"Convenios Pregrado"),m._h(i,"Convenios_Pregrado.xlsx")}static#e=this.\u0275fac=function(t){return new(t||r)};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const $=(r,c)=>({"text-success":r,"text-danger":c}),H=r=>["/plan-trabajo/pre-detalle",r];function Y(r,c){if(1&r&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&r){const o=c.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.siglas,"")}}function X(r,c){if(1&r&&(e.j41(0,"tr")(1,"th",34),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td",35),e.EFF(12),e.k0s(),e.j41(13,"td",35)(14,"span",36),e.nrm(15,"i",36),e.k0s()(),e.j41(16,"td",37)(17,"div",38)(18,"button",39),e.nrm(19,"i",40),e.EFF(20,"Ver Detalle "),e.k0s()()()()),2&r){const o=c.$implicit,t=c.index;e.R7$(2),e.JRh(t+1),e.R7$(2),e.JRh(o.nombre),e.R7$(2),e.JRh(o.fecha_inicio),e.R7$(2),e.JRh(o.fecha_fin),e.R7$(2),e.JRh(null==o.universidadDetalle?null:o.universidadDetalle.nombre),e.R7$(2),e.JRh(o.acuerdo.length),e.R7$(2),e.Y8G("ngClass",e.l_i(9,$,o.estado,!o.estado)),e.R7$(),e.Y8G("ngClass",o.estado?"fa-solid fa-circle text-success":"fa-solid fa-circle text-danger"),e.R7$(3),e.Y8G("routerLink",e.eq3(12,H,o.id))}}let J=(()=>{class r{constructor(o,t,n,i,a,s){this.modalService=t,this.planTrabajoService=n,this.universidadesService=i,this.exportPdfService=a,this.exportExcelService=s,this.page=1,this.pageSize=4,this.CONVENIOS=[],this.convenios=[],this.collection=0,this.listuniversidades=[],this.searchTerm="",this.newConvenio={nombre:"",is_postgrado:!1,fecha_inicio:"",fecha_fin:"",estado:!0,universidad:"",acuerdo:[]},o.backdrop="static",o.keyboard=!1,this.refreshPlanTrabajo()}ngOnInit(){this.getPlanTrabajo(),this.getUniversidades()}refreshPlanTrabajo(){let o=this.CONVENIOS;this.searchTerm&&(o=o.filter(t=>{const n=t.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()),i=t.universidadDetalle?.nombre.toLowerCase().includes(this.searchTerm.toLowerCase());return n||i})),this.collection=o.length,this.convenios=o.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),0===this.convenios.length&&this.page>1&&(this.page--,this.refreshPlanTrabajo())}open(o){this.modalService.open(o)}onSearchTermChange(){this.refreshPlanTrabajo()}getUniversidades(){this.universidadesService.getUniversidades().subscribe(o=>{console.log(o),this.listuniversidades=o},o=>{console.error(o)})}getPlanTrabajo(){this.planTrabajoService.getPlanTrabajo().subscribe({next:o=>{const t=o.filter(n=>!1===n.is_postgrado);this.CONVENIOS=t,this.collection=t.length,this.refreshPlanTrabajo(),this.universidadesService.getUniversidades().subscribe({next:n=>{t.forEach(i=>{if(i.universidad){const a=n.find(s=>s.id===i.universidad);a&&(i.universidadDetalle=a)}})},error:n=>{console.error("Error fetching universidades:",n)}})},error:o=>{console.error("Error fetching plan de trabajo:",o)}})}createPlanTrabajo(){this.planTrabajoService.createPlanTrabajo(this.newConvenio).subscribe(o=>{console.log(o),console.log("Datos enviados:",this.newConvenio),this.getPlanTrabajo()},o=>{console.error(o)})}exportarPDF(){this.exportPdfService.exportPlanTrabajoPDF(this.convenios)}exportarExcel(){this.exportExcelService.exportarConveniosExcel(this.convenios)}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(u.LY),e.rXU(u.Bq),e.rXU(C.a),e.rXU(A.k),e.rXU(U),e.rXU(G))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-pre-grado"]],features:[e.Jv_([u.LY,u.Bq])],decls:71,vars:22,consts:[["iconName","bell-ringing",3,"cardTitle","cardSubtitle"],[1,"cardWithShadow"],[1,"row"],[1,"col-md-6"],[1,"example-input","position-relative"],["type","text","placeholder","Buscar por nombre de plan o universidad",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"btn","btn-primary",2,"position","absolute","right","0","top","0"],[1,"fas","fa-search"],[2,"text-align","right"],[3,"buttonClick","showFirstButton","showSecondButton","iconName","buttonTitle","title","buttonText"],["for","nombre",1,"form-label","fw-bold"],["type","text","name","nombre","id","nombre","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],["for","universidad",1,"form-label","fw-bold"],["name","universidad","id","universidad",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-3"],["for","fecha_inicio",1,"form-label","fw-bold"],["type","date","id","fecha_inicio","name","fecha_inicio",1,"form-control",3,"ngModelChange","ngModel"],["for","fecha_fin",1,"form-label","fw-bold"],["type","date","id","fecha_fin","name","fecha_fin",1,"form-control",3,"ngModelChange","ngModel"],["nz-button","","nzType","link",1,"fw-bold",2,"margin-left","15px","text-decoration","none",3,"click"],[1,"fa-solid","fa-file-pdf","me-2"],["nz-button","","nzType","link",1,"text-success","fw-bold",2,"margin-left","15px","text-decoration","none",3,"click"],[1,"fa-solid","fa-file-excel","me-2"],[2,"overflow-x","auto"],[1,"table","table-striped"],[1,"fw-bold"],[1,"fw-bold","text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"pageChange","collectionSize","page","pageSize"],[1,"form-select",2,"width","auto",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value"],["scope","row"],[1,"text-center"],[3,"ngClass"],[1,"justify-content-center","d-flex"],[1,"d-flex"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"routerLink"],[1,""]],template:function(t,n){1&t&&(e.nrm(0,"app-reusable-card",0),e.j41(1,"mat-card",1)(2,"mat-card-content")(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.bIt("input",function(){return n.onSearchTermChange()}),e.k0s(),e.j41(7,"button",6),e.nrm(8,"i",7),e.k0s()()(),e.j41(9,"div",3)(10,"div",8)(11,"app-reusable-modal",9),e.bIt("buttonClick",function(){return n.createPlanTrabajo()}),e.j41(12,"div",2)(13,"div",3)(14,"label",10),e.EFF(15,"Nombre"),e.k0s(),e.j41(16,"input",11),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.nombre,a)||(n.newConvenio.nombre=a),a}),e.k0s()(),e.j41(17,"div",3)(18,"label",12),e.EFF(19,"Universidad"),e.k0s(),e.j41(20,"select",13),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.universidad,a)||(n.newConvenio.universidad=a),a}),e.j41(21,"option"),e.EFF(22,"Selecione la Universidad"),e.k0s(),e.DNE(23,Y,2,2,"option",14),e.k0s()()(),e.j41(24,"div",15)(25,"div",3)(26,"label",16),e.EFF(27,"Fecha Inicio"),e.k0s(),e.j41(28,"input",17),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.fecha_inicio,a)||(n.newConvenio.fecha_inicio=a),a}),e.k0s()(),e.j41(29,"div",3)(30,"label",18),e.EFF(31,"Fecha Inicio"),e.k0s(),e.j41(32,"input",19),e.mxI("ngModelChange",function(a){return e.DH7(n.newConvenio.fecha_fin,a)||(n.newConvenio.fecha_fin=a),a}),e.k0s()()()(),e.j41(33,"a",20),e.bIt("click",function(){return n.exportarPDF()}),e.nrm(34,"i",21),e.EFF(35," Exportar PDF "),e.k0s(),e.j41(36,"a",22),e.bIt("click",function(){return n.exportarExcel()}),e.nrm(37,"i",23),e.EFF(38," Exportar Excel "),e.k0s()()()(),e.nrm(39,"br"),e.j41(40,"div",24)(41,"table",25)(42,"thead")(43,"tr")(44,"th",26),e.EFF(45,"N\xb0"),e.k0s(),e.j41(46,"th",26),e.EFF(47,"Nombre"),e.k0s(),e.j41(48,"th",26),e.EFF(49,"Fec. Inicio"),e.k0s(),e.j41(50,"th",26),e.EFF(51,"Fec. Fin"),e.k0s(),e.j41(52,"th",26),e.EFF(53,"Universidad"),e.k0s(),e.j41(54,"th",27),e.EFF(55,"Acuerdos"),e.k0s(),e.j41(56,"th",27),e.EFF(57,"Estado"),e.k0s(),e.j41(58,"th",27),e.EFF(59,"Detalle"),e.k0s()()(),e.j41(60,"tbody"),e.DNE(61,X,21,14,"tr",28),e.k0s()()(),e.j41(62,"div",29)(63,"ngb-pagination",30),e.mxI("pageChange",function(a){return e.DH7(n.page,a)||(n.page=a),a}),e.bIt("pageChange",function(){return n.refreshPlanTrabajo()}),e.k0s(),e.j41(64,"select",31),e.mxI("ngModelChange",function(a){return e.DH7(n.pageSize,a)||(n.pageSize=a),a}),e.bIt("ngModelChange",function(){return n.refreshPlanTrabajo()}),e.j41(65,"option",32),e.EFF(66,"2 items per page"),e.k0s(),e.j41(67,"option",32),e.EFF(68,"4 items per page"),e.k0s(),e.j41(69,"option",32),e.EFF(70,"6 items per page"),e.k0s()()()()()),2&t&&(e.Y8G("cardTitle","Plan de Trabajo Pregrado")("cardSubtitle","Convenios especificos de EsSalud - Universidades"),e.R7$(6),e.R50("ngModel",n.searchTerm),e.R7$(5),e.Y8G("showFirstButton",!0)("showSecondButton",!1)("iconName","circle-plus")("buttonTitle","Agregar")("title","Agregar un Plan de Trabajo")("buttonText","Guardar"),e.R7$(5),e.R50("ngModel",n.newConvenio.nombre),e.R7$(4),e.R50("ngModel",n.newConvenio.universidad),e.R7$(3),e.Y8G("ngForOf",n.listuniversidades),e.R7$(5),e.R50("ngModel",n.newConvenio.fecha_inicio),e.R7$(4),e.R50("ngModel",n.newConvenio.fecha_fin),e.R7$(29),e.Y8G("ngForOf",n.convenios),e.R7$(2),e.Y8G("collectionSize",n.collection),e.R50("page",n.page),e.Y8G("pageSize",n.pageSize),e.R7$(),e.R50("ngModel",n.pageSize),e.R7$(),e.Y8G("ngValue",2),e.R7$(2),e.Y8G("ngValue",4),e.R7$(2),e.Y8G("ngValue",6))},dependencies:[h.YU,h.Sq,g.Wk,p.RN,p.m2,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,u.s5,j.v,b.w],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px}.filter-title[_ngcontent-%COMP%]{font-size:13px;color:#8f9bb3;margin-bottom:5px}.input-rounded[_ngcontent-%COMP%]{border-radius:50px;padding:0 15px}.icon-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border:none;background:transparent;cursor:pointer;color:#276ca1}.icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#276ca1}.btn-blue[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none}.btn-blue[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.ayuda-btn[_ngcontent-%COMP%]{background-color:#007bff!important;border-color:#007bff!important;color:#fff}"]})}return r})();var v=d(5357),E=d(6354),f=d(9437),_=d(8810),L=d(7468),W=d(1626),K=d(1339),Q=d(5794),q=d(1416);let k=(()=>{class r{constructor(o,t,n,i){this.http=o,this.authService=t,this.toastr=n,this.getHeaders=i,this.apiPlanTrabajo=v.i.baseUrl+v.i.planTrabajo,this.apiAcuerdos=v.i.baseUrl+v.i.acuerdos}getAcuerdos(){const o=this.getHeaders.getHeaders();return this.http.get(this.apiAcuerdos,{headers:o}).pipe((0,E.T)(t=>t),(0,f.W)(t=>t))}getPlanTrabajoById(o){const t=this.getHeaders.getHeaders();return this.http.get(`${this.apiPlanTrabajo}${o}/`,{headers:t}).pipe((0,f.W)(i=>(console.error("Error fetching plan de trabajo:",i),(0,_.$)(()=>i))))}getAcuerdosByDetalle(o){const t=this.getHeaders.getHeaders();return this.http.get(`${this.apiAcuerdos}${o}/`,{headers:t}).pipe((0,f.W)(i=>(console.error("Error fetching acuerdo:",i),(0,_.$)(()=>i))))}getAcuerdosByIds(o){const t=o.map(n=>this.getAcuerdosByDetalle(n));return(0,L.p)(t).pipe((0,f.W)(n=>(console.error("Error fetching acuerdos:",n),(0,_.$)(()=>n))))}createAcuerdos(o){const t=this.getHeaders.getHeaders();return this.http.post(this.apiAcuerdos,o,{headers:t}).pipe((0,E.T)(n=>n),(0,f.W)(n=>(console.error("Error creating Acuerdo:",n),(0,_.$)(()=>n))))}updateAcuerdo(o,t){const n=this.getHeaders.getHeaders();return this.http.put(`${this.apiAcuerdos}${o}/`,t,{headers:n}).pipe((0,E.T)(i=>i),(0,f.W)(i=>(console.error("Error updating Acuerdo:",i),(0,_.$)(()=>i))))}static#e=this.\u0275fac=function(t){return new(t||r)(e.KVO(W.Qq),e.KVO(K.u),e.KVO(Q.tw),e.KVO(q.y))};static#o=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Z=()=>["/plan-trabajo/postgrado"],ee=(r,c)=>({"text-success":r,"text-danger":c});function oe(r,c){if(1&r){const o=e.RV6();e.j41(0,"tr")(1,"th",20),e.EFF(2),e.k0s(),e.j41(3,"td",21),e.EFF(4),e.k0s(),e.j41(5,"td",21),e.EFF(6),e.k0s(),e.j41(7,"td",21),e.EFF(8),e.k0s(),e.j41(9,"td",21),e.EFF(10),e.k0s(),e.j41(11,"td",21),e.EFF(12),e.k0s(),e.j41(13,"td",21),e.EFF(14),e.k0s(),e.j41(15,"td",21),e.EFF(16),e.k0s(),e.j41(17,"td",22)(18,"span",23),e.nrm(19,"i",23),e.k0s()(),e.j41(20,"td",21)(21,"div",24)(22,"button",25),e.bIt("click",function(){const n=e.eBV(o).$implicit,i=e.XpG(),a=e.sdS(53);return e.Njj(i.openEditModal(n,a))}),e.nrm(23,"i",26),e.k0s(),e.j41(24,"button",27),e.nrm(25,"i",28),e.k0s()()()()}if(2&r){const o=c.$implicit,t=c.index;e.R7$(2),e.JRh(t+1),e.R7$(2),e.JRh(o.compromiso),e.R7$(2),e.JRh(o.detalle),e.R7$(2),e.JRh(o.beneficiarios),e.R7$(2),e.JRh(o.fecha_inicio),e.R7$(2),e.JRh(o.fecha_fin),e.R7$(2),e.SpI("S/.",o.valorizacion,""),e.R7$(2),e.JRh(o.is_esssalud_responsable?"Essalud":"Externo"),e.R7$(2),e.Y8G("ngClass",e.l_i(10,ee,o.estado,!o.estado)),e.R7$(),e.Y8G("ngClass",o.estado?"fa-solid fa-circle text-success":"fa-solid fa-circle text-danger")}}function ne(r,c){if(1&r){const o=e.RV6();e.j41(0,"div",29)(1,"h4",30),e.EFF(2,"Editar Acuerdo"),e.k0s(),e.j41(3,"button",31),e.bIt("click",function(){const n=e.eBV(o).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",32)(5,"form")(6,"div",33)(7,"label",34),e.EFF(8,"Compromiso"),e.k0s(),e.j41(9,"input",35),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.compromiso,n)||(i.newAcuerdo.compromiso=n),e.Njj(n)}),e.k0s()(),e.j41(10,"div",33)(11,"label",36),e.EFF(12,"Detalle"),e.k0s(),e.j41(13,"input",37),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.detalle,n)||(i.newAcuerdo.detalle=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",33)(15,"label",38),e.EFF(16,"Beneficiarios"),e.k0s(),e.j41(17,"input",39),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.beneficiarios,n)||(i.newAcuerdo.beneficiarios=n),e.Njj(n)}),e.k0s()(),e.j41(18,"div",33)(19,"label",40),e.EFF(20,"Fecha Inicio"),e.k0s(),e.j41(21,"input",41),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.fecha_inicio,n)||(i.newAcuerdo.fecha_inicio=n),e.Njj(n)}),e.k0s()(),e.j41(22,"div",33)(23,"label",42),e.EFF(24,"Fecha Fin"),e.k0s(),e.j41(25,"input",43),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.fecha_fin,n)||(i.newAcuerdo.fecha_fin=n),e.Njj(n)}),e.k0s()(),e.j41(26,"div",33)(27,"label",44),e.EFF(28,"Valorizaci\xf3n"),e.k0s(),e.j41(29,"input",45),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.valorizacion,n)||(i.newAcuerdo.valorizacion=n),e.Njj(n)}),e.k0s()()()(),e.j41(30,"div",46)(31,"button",47),e.bIt("click",function(){const n=e.eBV(o).$implicit;return e.Njj(n.dismiss())}),e.EFF(32,"Cancelar"),e.k0s(),e.j41(33,"button",48),e.bIt("click",function(){const n=e.eBV(o).$implicit;return e.XpG().updateAcuerdo(),e.Njj(n.close())}),e.EFF(34,"Guardar"),e.k0s()()}if(2&r){const o=e.XpG();e.R7$(9),e.R50("ngModel",o.newAcuerdo.compromiso),e.R7$(4),e.R50("ngModel",o.newAcuerdo.detalle),e.R7$(4),e.R50("ngModel",o.newAcuerdo.beneficiarios),e.R7$(4),e.R50("ngModel",o.newAcuerdo.fecha_inicio),e.R7$(4),e.R50("ngModel",o.newAcuerdo.fecha_fin),e.R7$(4),e.R50("ngModel",o.newAcuerdo.valorizacion)}}let te=(()=>{class r{constructor(o,t,n,i,a){this.route=o,this.modalService=n,this.acuerdosService=i,this.router=a,this.page=1,this.pageSize=10,this.ACUERDOS=[],this.acuerdos=[],this.collection=0,this.convenioId="",this.pasarId="",this.planNombre="",this.essaludValorizacion=0,this.externoValorizacion=0,this.newAcuerdo={compromiso:"",detalle:"",beneficiarios:"",fecha_inicio:"",fecha_fin:"",valorizacion:"",is_esssalud_responsable:!0,estado:!0,sede_Adjudicacion:""},t.backdrop="static",t.keyboard=!1,this.refreshAcuerdos()}ngOnInit(){this.convenioId=this.route.snapshot.paramMap.get("id")||"",this.pasarId=this.convenioId,this.getPlanTrabajo()}refreshAcuerdos(){this.acuerdos=this.ACUERDOS.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collection=this.ACUERDOS.length}open(o){this.modalService.open(o)}getPlanTrabajo(){this.acuerdosService.getPlanTrabajoById(this.convenioId).subscribe({next:o=>{this.getAcuerdos(o.acuerdo),this.planNombre=o.nombre,console.log("Plan de trabajo:",o)},error:o=>{console.error("Error fetching plan de trabajo:",o)}})}getAcuerdos(o){this.acuerdosService.getAcuerdosByIds(o).subscribe({next:t=>{this.ACUERDOS=t,this.collection=t.length,this.essaludValorizacion=0,this.externoValorizacion=0,t.forEach(n=>{n.is_esssalud_responsable?this.essaludValorizacion+=Number(n.valorizacion):this.externoValorizacion+=Number(n.valorizacion)}),this.refreshAcuerdos()},error:t=>{console.error("Error fetching acuerdos:",t)}})}getPasarId(){this.router.navigate(["/plan-trabajo/registro-plan",this.pasarId])}openEditModal(o,t){this.newAcuerdo={...o},this.modalService.open(t)}updateAcuerdo(){const o=this.newAcuerdo.id;o?this.acuerdosService.updateAcuerdo(o,this.newAcuerdo).subscribe({next:t=>{console.log("Acuerdo updated successfully:",t),this.getPlanTrabajo(),this.refreshAcuerdos(),this.modalService.dismissAll()},error:t=>{console.error("Error updating acuerdo:",t)}}):console.error("No se puede actualizar el acuerdo: ID es indefinido")}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(g.nX),e.rXU(u.LY),e.rXU(u.Bq),e.rXU(k),e.rXU(g.Ix))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-detalle"]],decls:54,vars:7,consts:[["editModal",""],[1,"cardWithShadow",3,"click"],[1,"row"],[1,"col-md-6"],[1,"d-flex"],[1,"me-2"],[1,"border","border-white","fondo-flechas","rounded-circle",3,"routerLink"],[1,"fa-solid","fa-arrow-left","flechas"],[1,"titles"],[1,"col-md-2"],[1,"cardWithShadow"],[1,"col-md-4"],[2,"text-align","right"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-circle-plus"],[2,"overflow-x","auto"],[1,"table","table-striped"],[1,"fw-bold"],[1,"fw-bold","text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"align-middle"],[1,"text-center","align-middle"],[3,"ngClass"],[1,"d-flex","justify-content-center"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"fa-solid","fa-edit"],[1,"btn","btn-sm","btn-outline-success"],[1,"fa-solid","fa-check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","compromiso",1,"form-label"],["id","compromiso","name","compromiso",1,"form-control",3,"ngModelChange","ngModel"],["for","detalle",1,"form-label"],["id","detalle","name","detalle",1,"form-control",3,"ngModelChange","ngModel"],["for","beneficiarios",1,"form-label"],["id","beneficiarios","name","beneficiarios",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaInicio",1,"form-label"],["id","fechaInicio","type","date","name","fechaInicio",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaFin",1,"form-label"],["id","fechaFin","type","date","name","fechaFin",1,"form-control",3,"ngModelChange","ngModel"],["for","valorizacion",1,"form-label"],["id","valorizacion","type","number","name","valorizacion",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"mat-card",1),e.bIt("click",function(s){return e.eBV(i),e.Njj(s.stopPropagation())}),e.j41(1,"mat-card-content")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),e.nrm(7,"i",7),e.k0s()(),e.nrm(8,"div",5),e.j41(9,"mat-card-title",8),e.EFF(10),e.k0s()()(),e.nrm(11,"div",9),e.k0s()()(),e.j41(12,"mat-card",10)(13,"mat-card-content")(14,"div",2)(15,"div",11)(16,"span"),e.EFF(17),e.k0s()(),e.j41(18,"div",11)(19,"span"),e.EFF(20),e.k0s()()(),e.j41(21,"div",12)(22,"button",13),e.bIt("click",function(){return e.eBV(i),e.Njj(n.getPasarId())}),e.nrm(23,"i",14),e.EFF(24," Agregar "),e.k0s()(),e.nrm(25,"br"),e.j41(26,"div",15)(27,"table",16)(28,"thead")(29,"tr")(30,"th",17),e.EFF(31,"N\xb0"),e.k0s(),e.j41(32,"th",17),e.EFF(33,"Compromiso"),e.k0s(),e.j41(34,"th",17),e.EFF(35,"Detalle"),e.k0s(),e.j41(36,"th",17),e.EFF(37,"Beneficiarios"),e.k0s(),e.j41(38,"th",17),e.EFF(39,"Fec. Inicio"),e.k0s(),e.j41(40,"th",17),e.EFF(41,"Fec. Fin"),e.k0s(),e.j41(42,"th",17),e.EFF(43,"Valorizaci\xf3n"),e.k0s(),e.j41(44,"th",17),e.EFF(45,"Responsable"),e.k0s(),e.j41(46,"th",18),e.EFF(47,"Estado"),e.k0s(),e.j41(48,"th",18),e.EFF(49,"OPC"),e.k0s()()(),e.j41(50,"tbody"),e.DNE(51,oe,26,13,"tr",19),e.k0s()()()()(),e.DNE(52,ne,35,6,"ng-template",null,0,e.C5r)}2&t&&(e.R7$(6),e.Y8G("routerLink",e.lJ4(6,Z)),e.R7$(4),e.SpI("Detalle de ",n.planNombre,""),e.R7$(7),e.SpI("Valorizaci\xf3n RPA: S/. ",n.essaludValorizacion,""),e.R7$(3),e.Lme("Valorizaci\xf3n ",n.planNombre,": S/. ",n.externoValorizacion,""),e.R7$(31),e.Y8G("ngForOf",n.acuerdos))},dependencies:[h.YU,h.Sq,g.Wk,p.RN,p.m2,p.dh,l.qT,l.me,l.Q0,l.BC,l.cb,l.vS,l.cV],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px}"]})}return r})();var S=d(8084);function ie(r,c){if(1&r&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&r){const o=c.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.nombre)}}const re=()=>["/plan-trabajo/pre-grado"],se=(r,c)=>({"text-success":r,"text-danger":c});function le(r,c){if(1&r){const o=e.RV6();e.j41(0,"tr")(1,"th",20),e.EFF(2),e.k0s(),e.j41(3,"td",21),e.EFF(4),e.k0s(),e.j41(5,"td",21),e.EFF(6),e.k0s(),e.j41(7,"td",21),e.EFF(8),e.k0s(),e.j41(9,"td",21),e.EFF(10),e.k0s(),e.j41(11,"td",21),e.EFF(12),e.k0s(),e.j41(13,"td",21),e.EFF(14),e.k0s(),e.j41(15,"td",21),e.EFF(16),e.k0s(),e.j41(17,"td",22)(18,"span",23),e.nrm(19,"i",23),e.k0s()(),e.j41(20,"td",21)(21,"div",24)(22,"button",25),e.bIt("click",function(){const n=e.eBV(o).$implicit,i=e.XpG(),a=e.sdS(53);return e.Njj(i.openEditModal(n,a))}),e.nrm(23,"i",26),e.k0s(),e.j41(24,"button",27),e.nrm(25,"i",28),e.k0s()()()()}if(2&r){const o=c.$implicit,t=c.index;e.R7$(2),e.JRh(t+1),e.R7$(2),e.JRh(o.compromiso),e.R7$(2),e.JRh(o.detalle),e.R7$(2),e.JRh(o.beneficiarios),e.R7$(2),e.JRh(o.fecha_inicio),e.R7$(2),e.JRh(o.fecha_fin),e.R7$(2),e.SpI("S/.",o.valorizacion,""),e.R7$(2),e.JRh(o.is_esssalud_responsable?"Essalud":"Externo"),e.R7$(2),e.Y8G("ngClass",e.l_i(10,se,o.estado,!o.estado)),e.R7$(),e.Y8G("ngClass",o.estado?"fa-solid fa-circle text-success":"fa-solid fa-circle text-danger")}}function de(r,c){if(1&r){const o=e.RV6();e.j41(0,"div",29)(1,"h4",30),e.EFF(2,"Editar Acuerdo"),e.k0s(),e.j41(3,"button",31),e.bIt("click",function(){const n=e.eBV(o).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",32)(5,"form")(6,"div",33)(7,"label",34),e.EFF(8,"Compromiso"),e.k0s(),e.j41(9,"input",35),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.compromiso,n)||(i.newAcuerdo.compromiso=n),e.Njj(n)}),e.k0s()(),e.j41(10,"div",33)(11,"label",36),e.EFF(12,"Detalle"),e.k0s(),e.j41(13,"input",37),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.detalle,n)||(i.newAcuerdo.detalle=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",33)(15,"label",38),e.EFF(16,"Beneficiarios"),e.k0s(),e.j41(17,"input",39),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.beneficiarios,n)||(i.newAcuerdo.beneficiarios=n),e.Njj(n)}),e.k0s()(),e.j41(18,"div",33)(19,"label",40),e.EFF(20,"Fecha Inicio"),e.k0s(),e.j41(21,"input",41),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.fecha_inicio,n)||(i.newAcuerdo.fecha_inicio=n),e.Njj(n)}),e.k0s()(),e.j41(22,"div",33)(23,"label",42),e.EFF(24,"Fecha Fin"),e.k0s(),e.j41(25,"input",43),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.fecha_fin,n)||(i.newAcuerdo.fecha_fin=n),e.Njj(n)}),e.k0s()(),e.j41(26,"div",33)(27,"label",44),e.EFF(28,"Valorizaci\xf3n"),e.k0s(),e.j41(29,"input",45),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.newAcuerdo.valorizacion,n)||(i.newAcuerdo.valorizacion=n),e.Njj(n)}),e.k0s()()()(),e.j41(30,"div",46)(31,"button",47),e.bIt("click",function(){const n=e.eBV(o).$implicit;return e.Njj(n.dismiss())}),e.EFF(32,"Cancelar"),e.k0s(),e.j41(33,"button",48),e.bIt("click",function(){const n=e.eBV(o).$implicit;return e.XpG().updateAcuerdo(),e.Njj(n.close())}),e.EFF(34,"Guardar"),e.k0s()()}if(2&r){const o=e.XpG();e.R7$(9),e.R50("ngModel",o.newAcuerdo.compromiso),e.R7$(4),e.R50("ngModel",o.newAcuerdo.detalle),e.R7$(4),e.R50("ngModel",o.newAcuerdo.beneficiarios),e.R7$(4),e.R50("ngModel",o.newAcuerdo.fecha_inicio),e.R7$(4),e.R50("ngModel",o.newAcuerdo.fecha_fin),e.R7$(4),e.R50("ngModel",o.newAcuerdo.valorizacion)}}function ue(r,c){if(1&r&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&r){const o=c.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.nombre)}}const pe=[{path:"",children:[{path:"convenios",component:y},{path:"postgrado",component:B},{path:"pre-grado",component:J},{path:"detalle/:id",component:te},{path:"registro-plan/:id",component:(()=>{class r{constructor(o,t,n,i,a,s,R){this.modalService=t,this.acuerdosService=n,this.planTrabajoService=i,this.route=a,this.router=s,this.sedeAdjudicacionService=R,this.page=1,this.pageSize=4,this.ACUERDOS=[],this.acuerdos=[],this.collection=0,this.convenioId="",this.listSedeAdjudicacion=[],this.idAcuerdo="",this.newAcuerdo={compromiso:"",detalle:"",beneficiarios:"",fecha_inicio:"",fecha_fin:"",valorizacion:"",is_esssalud_responsable:!0,estado:!0,sede_Adjudicacion:""},o.backdrop="static",o.keyboard=!1,this.refreshAcuerdos()}ngOnInit(){this.convenioId=this.route.snapshot.paramMap.get("id")||"",this.getSedeAdjudicaciones(),this.getAcuerdos()}refreshAcuerdos(){this.acuerdos=this.ACUERDOS.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collection=this.ACUERDOS.length}open(o){this.modalService.open(o)}getSedeAdjudicaciones(){this.sedeAdjudicacionService.getSedeAdjudicacion().subscribe(o=>{console.log(o),this.listSedeAdjudicacion=o},o=>{console.error(o)})}getAcuerdos(){this.acuerdosService.getAcuerdos().subscribe({next:o=>{this.ACUERDOS=o,this.collection=o.length,this.refreshAcuerdos()},error:o=>{console.error("Error fetching plan de trabajo:",o)}})}createAcuerdos(){this.acuerdosService.createAcuerdos(this.newAcuerdo).subscribe(o=>{const t=o.id;console.log(o),console.log("Acuerdo creado con ID:",t),console.log("Datos enviados:",this.newAcuerdo),this.actualizarAcuerdo(t),this.getAcuerdos()},o=>{console.error(o)})}actualizarAcuerdo(o){if("string"!=typeof o||!o)return void console.error("acuerdoId no es una cadena v\xe1lida:",o);const t={acuerdo_id:o};console.log("Acuerdos creados:",t),this.planTrabajoService.patchAcuerdo2(this.convenioId,t).subscribe(n=>{console.log("Plan de trabajo actualizado:",n),this.getAcuerdos(),this.regresar()},n=>{console.error("Error actualizando plan de trabajo:",n)})}regresar(){this.router.navigate(["/plan-trabajo/detalle",this.convenioId])}actualizarPagina(){window.location.reload()}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(u.LY),e.rXU(u.Bq),e.rXU(k),e.rXU(C.a),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(S.N))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-registro"]],inputs:{idAcuerdo:"idAcuerdo"},decls:82,vars:11,consts:[["acuerdoForm","ngForm"],[1,"cardWithShadow"],[1,"row"],[1,"col-md-6"],[1,"d-flex","flex-column"],[1,"d-flex","align-items-center"],[1,"me-2"],[1,"border","border-white","fondo-flechas","rounded-circle",3,"click"],[1,"fa-solid","fa-arrow-left","flechas"],[1,"titles"],[1,"col-md-2"],[1,"col-md-4"],[1,"d-flex","justify-content-end"],[1,"btn","ayuda-btn","me-2"],[1,"fa-solid","fa-circle-question","me-2","text-light"],[1,"text-light","fw-bold"],[1,"btn","border","actualizar-btn",3,"click"],[1,"fa-solid","fa-rotate-right","me-2","actualizar-icon"],[1,"fw-bold","actualizar-text"],[3,"ngSubmit"],[1,"col-md-12"],["for","compromiso",1,"form-label","fw-bold"],["id","compromiso","name","compromiso","rows","5","required","",1,"form-control",2,"resize","vertical",3,"ngModelChange","ngModel"],["for","detalle",1,"form-label","fw-bold"],["type","text","id","detalle","name","detalle","placeholder","Escribir detalle","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaInicio",1,"form-label","fw-bold"],["type","date","id","fechaInicio","name","fechaInicio","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaFin",1,"form-label","fw-bold"],["type","date","id","fechaFin","name","fechaFin","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","beneficiarios",1,"form-label","fw-bold"],["type","text","id","beneficiarios","name","beneficiarios","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","valorizacion",1,"form-label","fw-bold"],[1,"input-group"],[1,"input-group-text"],["type","number","id","valorizacion","name","valorizacion","min","0","step","0.01","placeholder","0.00","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","responsable",1,"form-label","fw-bold"],[1,"form-check"],["type","radio","name","responsableEssalud","id","responsableSi","value","true",1,"form-check-input",3,"ngModelChange","ngModel"],["for","responsableSi",1,"form-check-label"],["type","radio","name","responsableEssalud","id","responsableNo","value","false",1,"form-check-input",3,"ngModelChange","ngModel"],["for","responsableNo",1,"form-check-label"],["for","sedeAdjudicacion",1,"form-label","fw-bold"],["name","sedeAdjudicacion","id","sedeAdjudicacion","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","mt-5","w-25",3,"disabled"],[3,"value"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-content")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"button",7),e.bIt("click",function(){return e.eBV(i),e.Njj(n.regresar())}),e.nrm(8,"i",8),e.k0s()(),e.j41(9,"div")(10,"mat-card-title",9),e.EFF(11,"Registro de Compromiso"),e.k0s()()()()(),e.nrm(12,"div",10),e.j41(13,"div",11)(14,"div",12)(15,"button",13),e.nrm(16,"i",14),e.j41(17,"span",15),e.EFF(18,"Ayuda"),e.k0s()(),e.j41(19,"button",16),e.bIt("click",function(){return e.eBV(i),e.Njj(n.actualizarPagina())}),e.nrm(20,"i",17),e.j41(21,"span",18),e.EFF(22,"Actualizar"),e.k0s()()()()()()(),e.j41(23,"mat-card",1)(24,"mat-card-content")(25,"form",19,0),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.createAcuerdos())}),e.j41(27,"div",2)(28,"div",20)(29,"label",21),e.EFF(30,"Compromiso"),e.k0s(),e.j41(31,"textarea",22),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.compromiso,s)||(n.newAcuerdo.compromiso=s),e.Njj(s)}),e.k0s()()(),e.nrm(32,"br"),e.j41(33,"div",2)(34,"div",11)(35,"label",23),e.EFF(36,"Detalle"),e.k0s(),e.j41(37,"input",24),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.detalle,s)||(n.newAcuerdo.detalle=s),e.Njj(s)}),e.k0s()(),e.j41(38,"div",11)(39,"label",25),e.EFF(40,"Fecha Inicio"),e.k0s(),e.j41(41,"input",26),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.fecha_inicio,s)||(n.newAcuerdo.fecha_inicio=s),e.Njj(s)}),e.k0s()(),e.j41(42,"div",11)(43,"label",27),e.EFF(44,"Fecha Fin"),e.k0s(),e.j41(45,"input",28),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.fecha_fin,s)||(n.newAcuerdo.fecha_fin=s),e.Njj(s)}),e.k0s()()(),e.nrm(46,"br"),e.j41(47,"div",2)(48,"div",11)(49,"label",29),e.EFF(50,"Beneficiario"),e.k0s(),e.j41(51,"input",30),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.beneficiarios,s)||(n.newAcuerdo.beneficiarios=s),e.Njj(s)}),e.k0s()(),e.j41(52,"div",11)(53,"label",31),e.EFF(54,"Valorizaci\xf3n"),e.k0s(),e.j41(55,"div",32)(56,"span",33),e.EFF(57,"S/."),e.k0s(),e.j41(58,"input",34),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.valorizacion,s)||(n.newAcuerdo.valorizacion=s),e.Njj(s)}),e.k0s()()(),e.j41(59,"div",11)(60,"label",35),e.EFF(61,"Responsable RPA"),e.k0s(),e.j41(62,"div",36)(63,"input",37),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.is_esssalud_responsable,s)||(n.newAcuerdo.is_esssalud_responsable=s),e.Njj(s)}),e.k0s(),e.j41(64,"label",38),e.EFF(65,"S\xed"),e.k0s()(),e.j41(66,"div",36)(67,"input",39),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.is_esssalud_responsable,s)||(n.newAcuerdo.is_esssalud_responsable=s),e.Njj(s)}),e.k0s(),e.j41(68,"label",40),e.EFF(69,"No"),e.k0s()()()(),e.j41(70,"div",2)(71,"div",11)(72,"label",41),e.EFF(73,"Sede Docente"),e.k0s(),e.j41(74,"select",42),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.sede_Adjudicacion,s)||(n.newAcuerdo.sede_Adjudicacion=s),e.Njj(s)}),e.j41(75,"option",43),e.EFF(76,"Seleccione Sede"),e.k0s(),e.DNE(77,ie,2,2,"option",44),e.k0s()()(),e.nrm(78,"br"),e.j41(79,"div",45)(80,"button",46),e.EFF(81,"Registrar"),e.k0s()()()()()}if(2&t){const i=e.sdS(26);e.R7$(31),e.R50("ngModel",n.newAcuerdo.compromiso),e.R7$(6),e.R50("ngModel",n.newAcuerdo.detalle),e.R7$(4),e.R50("ngModel",n.newAcuerdo.fecha_inicio),e.R7$(4),e.R50("ngModel",n.newAcuerdo.fecha_fin),e.R7$(6),e.R50("ngModel",n.newAcuerdo.beneficiarios),e.R7$(7),e.R50("ngModel",n.newAcuerdo.valorizacion),e.R7$(5),e.R50("ngModel",n.newAcuerdo.is_esssalud_responsable),e.R7$(4),e.R50("ngModel",n.newAcuerdo.is_esssalud_responsable),e.R7$(7),e.R50("ngModel",n.newAcuerdo.sede_Adjudicacion),e.R7$(3),e.Y8G("ngForOf",n.listSedeAdjudicacion),e.R7$(3),e.Y8G("disabled",!i.valid)}},dependencies:[h.Sq,p.RN,p.m2,p.dh,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.Fm,l.BC,l.cb,l.YS,l.VZ,l.vS,l.cV],styles:[".custom-icon-bg[_ngcontent-%COMP%]{background-color:#276ca1;border-radius:50%;box-shadow:0 4px 8px #0003;width:30px;height:30px;display:flex;justify-content:center;align-items:center}.ayuda-btn[_ngcontent-%COMP%]{background-color:#00a5d7!important;border-color:#00a5d7!important;color:#fff}.actualizar-btn[_ngcontent-%COMP%]{border-color:#276ca1!important}.actualizar-text[_ngcontent-%COMP%], .actualizar-icon[_ngcontent-%COMP%]{color:#276ca1!important}.titles[_ngcontent-%COMP%]{font-size:17px}.subtitles[_ngcontent-%COMP%]{font-size:13px}"]})}return r})()},{path:"pre-detalle/:id",component:(()=>{class r{constructor(o,t,n,i,a){this.route=o,this.modalService=n,this.acuerdosService=i,this.router=a,this.page=1,this.pageSize=10,this.ACUERDOS=[],this.acuerdos=[],this.collection=0,this.convenioId="",this.pasarId="",this.planNombre="",this.essaludValorizacion=0,this.externoValorizacion=0,this.newAcuerdo={compromiso:"",detalle:"",beneficiarios:"",fecha_inicio:"",fecha_fin:"",valorizacion:"",is_esssalud_responsable:!0,estado:!0,sede_Adjudicacion:""},t.backdrop="static",t.keyboard=!1,this.refreshAcuerdos()}ngOnInit(){this.convenioId=this.route.snapshot.paramMap.get("id")||"",this.pasarId=this.convenioId,this.getPlanTrabajo()}refreshAcuerdos(){this.acuerdos=this.ACUERDOS.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collection=this.ACUERDOS.length}open(o){this.modalService.open(o)}getPlanTrabajo(){this.acuerdosService.getPlanTrabajoById(this.convenioId).subscribe({next:o=>{this.getAcuerdos(o.acuerdo),this.planNombre=o.nombre,console.log("Plan de trabajo:",o)},error:o=>{console.error("Error fetching plan de trabajo:",o)}})}getAcuerdos(o){this.acuerdosService.getAcuerdosByIds(o).subscribe({next:t=>{this.ACUERDOS=t,this.collection=t.length,this.essaludValorizacion=0,this.externoValorizacion=0,t.forEach(n=>{n.is_esssalud_responsable?this.essaludValorizacion+=Number(n.valorizacion):this.externoValorizacion+=Number(n.valorizacion)}),this.refreshAcuerdos()},error:t=>{console.error("Error fetching acuerdos:",t)}})}getPasarId(){this.router.navigate(["/plan-trabajo/pre-registro",this.pasarId])}openEditModal(o,t){this.newAcuerdo={...o},this.modalService.open(t)}updateAcuerdo(){const o=this.newAcuerdo.id;o?this.acuerdosService.updateAcuerdo(o,this.newAcuerdo).subscribe({next:t=>{console.log("Acuerdo updated successfully:",t),this.getPlanTrabajo(),this.refreshAcuerdos(),this.modalService.dismissAll()},error:t=>{console.error("Error updating acuerdo:",t)}}):console.error("No se puede actualizar el acuerdo: ID es indefinido")}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(g.nX),e.rXU(u.LY),e.rXU(u.Bq),e.rXU(k),e.rXU(g.Ix))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-pre-detalle"]],decls:54,vars:7,consts:[["editModal",""],[1,"cardWithShadow",3,"click"],[1,"row"],[1,"col-md-6"],[1,"d-flex"],[1,"me-2"],[1,"border","border-white","fondo-flechas","rounded-circle",3,"routerLink"],[1,"fa-solid","fa-arrow-left","flechas"],[1,"titles"],[1,"col-md-2"],[1,"cardWithShadow"],[1,"col-md-4"],[2,"text-align","right"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-circle-plus"],[2,"overflow-x","auto"],[1,"table","table-striped"],[1,"fw-bold"],[1,"fw-bold","text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"align-middle"],[1,"text-center","align-middle"],[3,"ngClass"],[1,"d-flex","justify-content-center"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"fa-solid","fa-edit"],[1,"btn","btn-sm","btn-outline-success"],[1,"fa-solid","fa-check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","compromiso",1,"form-label"],["id","compromiso","name","compromiso",1,"form-control",3,"ngModelChange","ngModel"],["for","detalle",1,"form-label"],["id","detalle","name","detalle",1,"form-control",3,"ngModelChange","ngModel"],["for","beneficiarios",1,"form-label"],["id","beneficiarios","name","beneficiarios",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaInicio",1,"form-label"],["id","fechaInicio","type","date","name","fechaInicio",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaFin",1,"form-label"],["id","fechaFin","type","date","name","fechaFin",1,"form-control",3,"ngModelChange","ngModel"],["for","valorizacion",1,"form-label"],["id","valorizacion","type","number","name","valorizacion",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"mat-card",1),e.bIt("click",function(s){return e.eBV(i),e.Njj(s.stopPropagation())}),e.j41(1,"mat-card-content")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),e.nrm(7,"i",7),e.k0s()(),e.nrm(8,"div",5),e.j41(9,"mat-card-title",8),e.EFF(10),e.k0s()()(),e.nrm(11,"div",9),e.k0s()()(),e.j41(12,"mat-card",10)(13,"mat-card-content")(14,"div",2)(15,"div",11)(16,"span"),e.EFF(17),e.k0s()(),e.j41(18,"div",11)(19,"span"),e.EFF(20),e.k0s()()(),e.j41(21,"div",12)(22,"button",13),e.bIt("click",function(){return e.eBV(i),e.Njj(n.getPasarId())}),e.nrm(23,"i",14),e.EFF(24," Agregar "),e.k0s()(),e.nrm(25,"br"),e.j41(26,"div",15)(27,"table",16)(28,"thead")(29,"tr")(30,"th",17),e.EFF(31,"N\xb0"),e.k0s(),e.j41(32,"th",17),e.EFF(33,"Compromiso"),e.k0s(),e.j41(34,"th",17),e.EFF(35,"Detalle"),e.k0s(),e.j41(36,"th",17),e.EFF(37,"Beneficiarios"),e.k0s(),e.j41(38,"th",17),e.EFF(39,"Fec. Inicio"),e.k0s(),e.j41(40,"th",17),e.EFF(41,"Fec. Fin"),e.k0s(),e.j41(42,"th",17),e.EFF(43,"Valorizaci\xf3n"),e.k0s(),e.j41(44,"th",17),e.EFF(45,"Responsable"),e.k0s(),e.j41(46,"th",18),e.EFF(47,"Estado"),e.k0s(),e.j41(48,"th",18),e.EFF(49,"OPC"),e.k0s()()(),e.j41(50,"tbody"),e.DNE(51,le,26,13,"tr",19),e.k0s()()()()(),e.DNE(52,de,35,6,"ng-template",null,0,e.C5r)}2&t&&(e.R7$(6),e.Y8G("routerLink",e.lJ4(6,re)),e.R7$(4),e.SpI("Detalle de ",n.planNombre,""),e.R7$(7),e.SpI("Valorizaci\xf3n RPA: S/. ",n.essaludValorizacion,""),e.R7$(3),e.Lme("Valorizaci\xf3n ",n.planNombre,": S/. ",n.externoValorizacion,""),e.R7$(31),e.Y8G("ngForOf",n.acuerdos))},dependencies:[h.YU,h.Sq,g.Wk,p.RN,p.m2,p.dh,l.qT,l.me,l.Q0,l.BC,l.cb,l.vS,l.cV],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px}"]})}return r})()},{path:"pre-registro/:id",component:(()=>{class r{constructor(o,t,n,i,a,s,R){this.modalService=t,this.acuerdosService=n,this.planTrabajoService=i,this.route=a,this.router=s,this.sedeAdjudicacionService=R,this.page=1,this.pageSize=4,this.ACUERDOS=[],this.acuerdos=[],this.collection=0,this.convenioId="",this.listSedeAdjudicacion=[],this.idAcuerdo="",this.newAcuerdo={compromiso:"",detalle:"",beneficiarios:"",fecha_inicio:"",fecha_fin:"",valorizacion:"",is_esssalud_responsable:!0,estado:!0,sede_Adjudicacion:""},o.backdrop="static",o.keyboard=!1,this.refreshAcuerdos()}ngOnInit(){this.convenioId=this.route.snapshot.paramMap.get("id")||"",this.getSedeAdjudicaciones(),this.getAcuerdos()}refreshAcuerdos(){this.acuerdos=this.ACUERDOS.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collection=this.ACUERDOS.length}open(o){this.modalService.open(o)}getSedeAdjudicaciones(){this.sedeAdjudicacionService.getSedeAdjudicacion().subscribe(o=>{console.log(o),this.listSedeAdjudicacion=o},o=>{console.error(o)})}getAcuerdos(){this.acuerdosService.getAcuerdos().subscribe({next:o=>{this.ACUERDOS=o,this.collection=o.length,this.refreshAcuerdos()},error:o=>{console.error("Error fetching plan de trabajo:",o)}})}createAcuerdos(){this.acuerdosService.createAcuerdos(this.newAcuerdo).subscribe(o=>{const t=o.id;console.log(o),console.log("Acuerdo creado con ID:",t),console.log("Datos enviados:",this.newAcuerdo),this.actualizarAcuerdo(t),this.getAcuerdos()},o=>{console.error(o)})}actualizarAcuerdo(o){if("string"!=typeof o||!o)return void console.error("acuerdoId no es una cadena v\xe1lida:",o);const t={acuerdo_id:o};console.log("Acuerdos creados:",t),this.planTrabajoService.patchAcuerdo2(this.convenioId,t).subscribe(n=>{console.log("Plan de trabajo actualizado:",n),this.getAcuerdos(),this.regresar()},n=>{console.error("Error actualizando plan de trabajo:",n)})}regresar(){this.router.navigate(["/plan-trabajo/pre-detalle",this.convenioId])}actualizarPagina(){window.location.reload()}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(u.LY),e.rXU(u.Bq),e.rXU(k),e.rXU(C.a),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(S.N))};static#o=this.\u0275cmp=e.VBU({type:r,selectors:[["app-pre-registro"]],inputs:{idAcuerdo:"idAcuerdo"},decls:82,vars:11,consts:[["acuerdoForm","ngForm"],[1,"cardWithShadow"],[1,"row"],[1,"col-md-6"],[1,"d-flex","flex-column"],[1,"d-flex","align-items-center"],[1,"me-2"],[1,"border","border-white","fondo-flechas","rounded-circle",3,"click"],[1,"fa-solid","fa-arrow-left","flechas"],[1,"titles"],[1,"col-md-2"],[1,"col-md-4"],[1,"d-flex","justify-content-end"],[1,"btn","ayuda-btn","me-2"],[1,"fa-solid","fa-circle-question","me-2","text-light"],[1,"text-light","fw-bold"],[1,"btn","border","actualizar-btn",3,"click"],[1,"fa-solid","fa-rotate-right","me-2","actualizar-icon"],[1,"fw-bold","actualizar-text"],[3,"ngSubmit"],[1,"col-md-12"],["for","compromiso",1,"form-label","fw-bold"],["id","compromiso","name","compromiso","rows","5","required","",1,"form-control",2,"resize","vertical",3,"ngModelChange","ngModel"],["for","detalle",1,"form-label","fw-bold"],["type","text","id","detalle","name","detalle","placeholder","Escribir detalle","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaInicio",1,"form-label","fw-bold"],["type","date","id","fechaInicio","name","fechaInicio","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaFin",1,"form-label","fw-bold"],["type","date","id","fechaFin","name","fechaFin","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","beneficiarios",1,"form-label","fw-bold"],["type","text","id","beneficiarios","name","beneficiarios","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","valorizacion",1,"form-label","fw-bold"],[1,"input-group"],[1,"input-group-text"],["type","number","id","valorizacion","name","valorizacion","min","0","step","0.01","placeholder","0.00","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","responsable",1,"form-label","fw-bold"],[1,"form-check"],["type","radio","name","responsableEssalud","id","responsableSi","value","true",1,"form-check-input",3,"ngModelChange","ngModel"],["for","responsableSi",1,"form-check-label"],["type","radio","name","responsableEssalud","id","responsableNo","value","false",1,"form-check-input",3,"ngModelChange","ngModel"],["for","responsableNo",1,"form-check-label"],["for","sedeAdjudicacion",1,"form-label","fw-bold"],["name","sedeAdjudicacion","id","sedeAdjudicacion","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","mt-5","w-25",3,"disabled"],[3,"value"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-content")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"button",7),e.bIt("click",function(){return e.eBV(i),e.Njj(n.regresar())}),e.nrm(8,"i",8),e.k0s()(),e.j41(9,"div")(10,"mat-card-title",9),e.EFF(11,"Registro de Compromiso"),e.k0s()()()()(),e.nrm(12,"div",10),e.j41(13,"div",11)(14,"div",12)(15,"button",13),e.nrm(16,"i",14),e.j41(17,"span",15),e.EFF(18,"Ayuda"),e.k0s()(),e.j41(19,"button",16),e.bIt("click",function(){return e.eBV(i),e.Njj(n.actualizarPagina())}),e.nrm(20,"i",17),e.j41(21,"span",18),e.EFF(22,"Actualizar"),e.k0s()()()()()()(),e.j41(23,"mat-card",1)(24,"mat-card-content")(25,"form",19,0),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.createAcuerdos())}),e.j41(27,"div",2)(28,"div",20)(29,"label",21),e.EFF(30,"Compromiso"),e.k0s(),e.j41(31,"textarea",22),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.compromiso,s)||(n.newAcuerdo.compromiso=s),e.Njj(s)}),e.k0s()()(),e.nrm(32,"br"),e.j41(33,"div",2)(34,"div",11)(35,"label",23),e.EFF(36,"Detalle"),e.k0s(),e.j41(37,"input",24),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.detalle,s)||(n.newAcuerdo.detalle=s),e.Njj(s)}),e.k0s()(),e.j41(38,"div",11)(39,"label",25),e.EFF(40,"Fecha Inicio"),e.k0s(),e.j41(41,"input",26),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.fecha_inicio,s)||(n.newAcuerdo.fecha_inicio=s),e.Njj(s)}),e.k0s()(),e.j41(42,"div",11)(43,"label",27),e.EFF(44,"Fecha Fin"),e.k0s(),e.j41(45,"input",28),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.fecha_fin,s)||(n.newAcuerdo.fecha_fin=s),e.Njj(s)}),e.k0s()()(),e.nrm(46,"br"),e.j41(47,"div",2)(48,"div",11)(49,"label",29),e.EFF(50,"Beneficiario"),e.k0s(),e.j41(51,"input",30),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.beneficiarios,s)||(n.newAcuerdo.beneficiarios=s),e.Njj(s)}),e.k0s()(),e.j41(52,"div",11)(53,"label",31),e.EFF(54,"Valorizaci\xf3n"),e.k0s(),e.j41(55,"div",32)(56,"span",33),e.EFF(57,"S/."),e.k0s(),e.j41(58,"input",34),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.valorizacion,s)||(n.newAcuerdo.valorizacion=s),e.Njj(s)}),e.k0s()()(),e.j41(59,"div",11)(60,"label",35),e.EFF(61,"Responsable RPA"),e.k0s(),e.j41(62,"div",36)(63,"input",37),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.is_esssalud_responsable,s)||(n.newAcuerdo.is_esssalud_responsable=s),e.Njj(s)}),e.k0s(),e.j41(64,"label",38),e.EFF(65,"S\xed"),e.k0s()(),e.j41(66,"div",36)(67,"input",39),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.is_esssalud_responsable,s)||(n.newAcuerdo.is_esssalud_responsable=s),e.Njj(s)}),e.k0s(),e.j41(68,"label",40),e.EFF(69,"No"),e.k0s()()()(),e.j41(70,"div",2)(71,"div",11)(72,"label",41),e.EFF(73,"Sede Docente"),e.k0s(),e.j41(74,"select",42),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.newAcuerdo.sede_Adjudicacion,s)||(n.newAcuerdo.sede_Adjudicacion=s),e.Njj(s)}),e.j41(75,"option",43),e.EFF(76,"Seleccione Sede"),e.k0s(),e.DNE(77,ue,2,2,"option",44),e.k0s()()(),e.nrm(78,"br"),e.j41(79,"div",45)(80,"button",46),e.EFF(81,"Registrar"),e.k0s()()()()()}if(2&t){const i=e.sdS(26);e.R7$(31),e.R50("ngModel",n.newAcuerdo.compromiso),e.R7$(6),e.R50("ngModel",n.newAcuerdo.detalle),e.R7$(4),e.R50("ngModel",n.newAcuerdo.fecha_inicio),e.R7$(4),e.R50("ngModel",n.newAcuerdo.fecha_fin),e.R7$(6),e.R50("ngModel",n.newAcuerdo.beneficiarios),e.R7$(7),e.R50("ngModel",n.newAcuerdo.valorizacion),e.R7$(5),e.R50("ngModel",n.newAcuerdo.is_esssalud_responsable),e.R7$(4),e.R50("ngModel",n.newAcuerdo.is_esssalud_responsable),e.R7$(7),e.R50("ngModel",n.newAcuerdo.sede_Adjudicacion),e.R7$(3),e.Y8G("ngForOf",n.listSedeAdjudicacion),e.R7$(3),e.Y8G("disabled",!i.valid)}},dependencies:[h.Sq,p.RN,p.m2,p.dh,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.Fm,l.BC,l.cb,l.YS,l.VZ,l.vS,l.cV]})}return r})()}]}];var he=d(2941),ge=d(9159),me=d(3887),fe=d(4912),be=d(5509),_e=d(6695),Fe=d(4006),je=d(9461),Ce=d(8834);let ve=(()=>{class r{static#e=this.\u0275fac=function(t){return new(t||r)};static#o=this.\u0275mod=e.$C({type:r});static#n=this.\u0275inj=e.G2t({imports:[h.MD,g.iI.forChild(pe),he.G,l.YN,ge.tP,_e.Ou,l.X1,Fe.hM,je.I,Ce.Hl,me.G,fe.X4.pick(be)]})}return r})()}}]);